<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title></title>
</head>

<body>
	<!--The content below is only a placeholder and can be replaced.-->

	<link rel="stylesheet" href="/bootstrap/css/bootstrap.css">

	<link rel="stylesheet" href="/css/basic.css">
	<script src="/ckeditor5/ckeditor.js"></script>

	<%- include("../component/header.ejs")%>

	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-2">
				<%- include("../component/aside.ejs")%>

			</div>
			<div class="col-sm-10">
				<ol class="breadcrumb">
					<li class="active">商品管理
					</li>
					<li class="active">商品列表
					</li>
				</ol>
				<div class="panel panel-default">

					<div class="panel-heading">
						修改商品
					</div>
					<div class="panel-body">
						<div class="table-responsive input-form">
							<form action="/admin/doeditproduct?id=<%=editDatas._id%>" method="post"
								enctype="multipart/form-data">
								<ul>
									<li> 商品名称: <input type="text" name="title" value="<%=editDatas.title%>" /></li>

									<li> 商品图片: <input type="file" id="file" name="pic" /></li>
									<li>
										<img src="<%=editDatas.pic%>" style="width: 100px;" alt="" id="thumb">
									</li>
									<li> 商品价格: <input type="text" name="price" value="<%=editDatas.price%>" /></li>
									<li> 商品邮费: <input type="text" name="postage" value="<%=editDatas.postage%>" /></li>

									<li>
										商品描述:
										<textarea name="content" id="ckeditor" cols="60" rows="8">
											<%=editDatas.content%>
										</textarea>
									</li>

									<li>
										<br />
										<button type="submit" class="btn btn-default">提交</button>
									</li>

								</ul>

							</form>
						</div>
					</div>

				</div>

			</div>
		</div>
	</div>
	<script>
		let ckeditor;
		ClassicEditor.create(document.querySelector("#ckeditor")).then((res) => {
			console.log(res);
		})  //#ckeditor 多行文本上边定义的id



		// js实现上传预览
		let file = document.querySelector("#file")  //获取上传文件的input
		let thumb = document.querySelector("#thumb");  //获取上传图片之后预览img标签
		file.onchange = function () {
			//1、创建一个文件读取对象
			let render = new FileReader()
			console.log(this.files[0]);
			//2、读取文件
			console.log(render);
			render.readAsDataURL(this.files[0])
			render.onload = function () {
				console.log(render.result);
				thumb.src = render.result
			}
		}

	</script>
</body>

</html>